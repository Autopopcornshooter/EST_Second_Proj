<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>동네 소개 페이지</title>
    <link rel="stylesheet" th:href="@{/css/introducepage.css}">
</head>
<body>
<!-- 상단 메뉴 -->
<header class="topbar">
    <div class="topbar-left">
        <img th:src="@{/images/BaeMin_Logo.jpeg}" class="logo" alt="로고">
        <nav>
            <a href="#">동네소개</a>
            <a href="#">동네인증</a>
        </nav>
    </div>
    <div class="topbar-right">
        <form th:action="@{/api/restaurants/search}" method="get" class="search-form">
            <input type="text" name="q" placeholder="찾는 메뉴가 뭐예요?">
        </form>
        <button>채팅하기</button>
        <button>로그아웃</button>
    </div>
</header>

<!-- 메인 섹션 -->
<section class="main-hero">
    <div class="hero-text">
        <h1>우리 동네<br>식당 소개</h1>
        <p>오늘도 가장 앞서 뜨겁게 달립니다.</p>
    </div>
    <div class="hero-img">
        <img th:src="@{/images/Baemin-main.jpg}" alt="동네 사장님">
    </div>
</section>

<!-- 식당 리스트 -->
<section class="restaurant-list-section">
    <h2>우리 동네 식당 소개</h2>
    <div class="restaurant-grid">
        <!-- 식당 카드 반복 -->
        <div class="restaurant-card"
             th:each="restaurant : ${restaurants}"
             th:onclick="'location.href=\'/api/restaurants/' + ${restaurant.id} + '\''"
             style="cursor:pointer;">
            <div class="restaurant-img">
                <img th:if="${restaurant.imageUrl != null}" th:src="@{${restaurant.imageUrl}}" alt="식당 이미지">
            </div>
            <div class="restaurant-info">
                <p class="restaurant-name" th:text="${restaurant.name}">식당명</p>
                <p class="restaurant-menu" th:text="${restaurant.mainMenu}">대표 메뉴</p>
                <span th:text="${#numbers.formatDecimal(restaurant.price, 0, 'COMMA', 0, 'POINT') +'원'}"></span>
                <p class="restaurant-views" th:text="'조회수 ' + ${restaurant.view}">조회수</p>
            </div>
        </div>
    </div>

    <!-- 페이지네이션 -->
    <div class="pagination" th:if="${restaurants.totalPages > 1}">
        <a class="page-btn"
           th:if="${restaurants.hasPrevious()}"
           th:href="@{/api/restaurants(page=${restaurants.number - 1}, size=${restaurants.size})}">&lt;</a>

        <span class="page-info" th:text="${restaurants.number + 1} + '/' + ${restaurants.totalPages}"></span>

        <a class="page-btn"
           th:if="${restaurants.hasNext()}"
           th:href="@{/api/restaurants(page=${restaurants.number + 1}, size=${restaurants.size})}">&gt;</a>
    </div>


    <!--리스트가 비어 있을 때-->
    <p th:if="${restaurants.content.size() == 0}" class="no-restaurant" style="color: #666666">
        현 지역에 등록되어 있는 식당이 없어요...
    </p>


    <!-- 식당 등록 버튼 -->
    <button class="add-restaurant-btn" onclick="window.location.href='/api/restaurants/restaurant-form'">식당 등록</button>
</section>

</body>
</html>